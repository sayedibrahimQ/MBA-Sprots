{% extends "ecommerce/base.html" %}
{% load static %}

{% block css %}


        
.product-gallery {
    position: relative;
}

.main-image {
    width: 100%;
    height: auto;
    max-height: 550px;
    object-fit: cover;
    border-radius: 15px;
    border: 2px solid rgba(255,193,7,0.2);
    transition: all 0.3s ease, opacity 0.4s ease;
}

.main-image:hover {
    border-color: #ffc107;
    box-shadow: 0 0 30px rgba(255,193,7,0.4);
}

.main-image-fade {
    opacity: 0;
}

.thumbnail-gallery {
    display: flex;
    gap: 10px;
    margin-top: 15px;
    overflow-x: auto;
    padding: 5px 0;
}

.thumbnail {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: 8px;
    border: 2px solid transparent;
    cursor: pointer;
    transition: all 0.3s ease;
    flex-shrink: 0;
}

.thumbnail.active,
.thumbnail:hover {
    border-color: #ffc107;
    transform: scale(1.08);
    box-shadow: 0 0 15px rgba(255,193,7,0.25);
}

.product-info-container {
    background: rgba(255,255,255,0.1);
    backdrop-filter: blur(10px);
    border-radius: 20px;
    padding: 30px;
    margin-right: 20px;
}

.product-title {
    font-size: 1.8rem;
    font-weight: 700;
    color: #ffc107;
    margin-bottom: 15px;
}

.product-price {
    font-size: 2rem;
    font-weight: 700;
    color: #28a745;
    margin-bottom: 20px;
}

.product-description {
    line-height: 1.8;
    margin-bottom: 25px;
    color: rgba(255,255,255,0.9);
}

.size-selector {
    margin-bottom: 25px;
}

.size-option {
    display: inline-block;
    width: 45px;
    height: 45px;
    line-height: 45px;
    text-align: center;
    border: 2px solid rgba(255,255,255,0.3);
    border-radius: 8px;
    margin: 0 5px 10px 0;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 600;
}

.size-option:hover {
    border-color: #ffc107;
    color: #ffc107;
    transform: scale(1.05);
    box-shadow: 0 0 10px rgba(255,193,7,0.2);
}

.size-option.active {
    border-color: #ffc107;
    background: #ffc107;
    color: #000;
    transform: scale(1.05);
    box-shadow: 0 0 15px rgba(255,193,7,0.3);
}

.size-option:focus {
    outline: none;
    box-shadow: 0 0 0 0.2rem rgba(255,193,7,0.25);
}

.quantity-selector {
    display: flex;
    align-items: center;
    margin-bottom: 25px;
}

.quantity-selector label { 
    margin-left: 10px; /* Adjusted for RTL, this adds space to the left of the controls if label is first */
    /* If label is to the right (like <label> <controls_div>): class="ms-3" on label or margin-right here */
    font-weight: 600;
    color: rgba(255,255,255,0.85);
}
.quantity-controls-product { 
    display: flex;
    align-items: center;
    background: rgba(0,0,0,0.2);
    border-radius: 22px; /* Adjusted for a tighter look with 30px buttons */
    padding: 4px; /* Adjusted padding */
    border: 1px solid rgba(255,193,7,0.25);
}
.quantity-btn-product { 
    width: 30px; 
    height: 30px;
    border: none;
    background: transparent;
    color: #ffc107;
    font-size: 1rem; /* Slightly adjusted */
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    border-radius: 50%; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    line-height: 1; /* Ensure text is centered in button */
}

.quantity-btn-product:focus {
    outline: none;
    box-shadow: 0 0 0 0.2rem rgba(255,193,7,0.25); 
}
.quantity-input-product { 
    width: 40px; /* Adjusted width */
    text-align: center;
    border: none; /* Removed border */
    background: transparent; /* Removed background */
    color: white;
    font-weight: 600;
    font-size: 0.95rem; /* Adjusted font size */
    padding: 0 3px; 
    /* Height will be implicitly handled by flexbox alignment and line-height */
    /* No border-radius needed as it's borderless */
    transition: box-shadow 0.3s ease; /* Only transition shadow if focus adds one directly to input */
    -moz-appearance: textfield; 
}
.quantity-input-product::-webkit-outer-spin-button,
.quantity-input-product::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0; 
}
.quantity-input-product:focus {
    outline: none;
    /* No specific background/border change on focus if it's meant to be seamless */
    /* Optional: could add a very subtle inner shadow or text shadow if needed */
    box-shadow: none; /* Explicitly remove browser default focus ring if any remains */
}

.btn-add-cart {
    background: linear-gradient(45deg, #ffc107, #ff8c00);
    border: none;
    color: #000;
    font-weight: 700;
    padding: 15px 30px;
    border-radius: 25px;
    font-size: 1.1rem;
    width: 100%;
    margin-bottom: 15px;
    transition: all 0.3s ease;
}

.btn-add-cart:hover {
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 10px 20px rgba(255,193,7,0.35);
    color: #000;
}

.btn-add-cart:focus {
    outline: none;
    box-shadow: 0 0 0 0.2rem rgba(255,193,7,0.3), 0 10px 20px rgba(255,193,7,0.3);
}

.btn-wishlist {
    background: transparent;
    border: 2px solid #e74c3c;
    color: #e74c3c;
    font-weight: 600;
    padding: 12px 25px;
    border-radius: 25px;
    width: 100%;
    transition: all 0.3s ease;
}

.btn-wishlist:hover {
    background: #ffc107;
    color: #000;
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 5px 15px rgba(255,193,7,0.25);
}

.btn-wishlist:focus {
    outline: none;
    box-shadow: 0 0 0 0.2rem rgba(255,193,7,0.25);
}

.btn-wishlist.active {
    background: #e74c3c;
    color: white;
}

.product-features {
    background: rgba(0,0,0,0.3);
    border-radius: 15px;
    padding: 20px;
    margin-top: 25px;
}

.feature-item {
    display: flex;
    align-items: center;
    margin-bottom: 12px;
    padding: 10px 5px;
    color: rgba(255,255,255,0.85);
    font-size: 0.95rem;
    border-radius: 8px;
    transition: background-color 0.3s ease;
}

.feature-item:hover {
    background-color: rgba(255,193,7,0.08);
}

.feature-icon {
    color: #ffc107;
    font-size: 1.2rem;
    margin-left: 15px;
    width: 25px;
}

.related-products {
    margin-top: 50px;
}

.section-title {
    font-size: 1.8rem;
    font-weight: 700;
    color: #ffc107;
    text-align: center;
    margin-bottom: 30px;
    position: relative;
}

.section-title::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 3px;
    background: linear-gradient(45deg, #ffc107, #ff8c00);
    border-radius: 2px;
}

.related-card {
    background: rgba(255,255,255,0.1);
    border-radius: 15px;
    overflow: hidden;
    transition: all 0.3s ease;
    margin-bottom: 20px;
    backdrop-filter: blur(10px);
}

.related-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 35px rgba(0,0,0,0.4);
}

.related-card-image {
    position: relative;
    overflow: hidden;
    height: 220px;
}

.related-card-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.related-card:hover .related-card-image img {
    transform: scale(1.1);
}

.sale-badge {
    position: absolute;
    top: 10px;
    right: 10px;
    background: #dc3545;
    color: white;
    padding: 5px 12px;
    border-radius: 15px;
    font-size: 0.8rem;
    font-weight: 600;
}

.related-card-body {
    padding: 20px;
}

.related-card-title {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 10px;
    color: white;
    line-height: 1.4;
}

.related-card-price {
    font-size: 1.2rem;
    font-weight: 700;
    color: #28a745;
}

.old-price {
    text-decoration: line-through;
    color: rgba(255,255,255,0.5);
    font-size: 0.9rem;
    margin-right: 10px;
}

.zoom-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.9);
    z-index: 9999;
    display: none;
    align-items: center;
    justify-content: center;
}

.zoom-image {
    max-width: 90%;
    max-height: 90%;
    object-fit: contain;
}

.zoom-close {
    position: absolute;
    top: 25px;
    right: 25px;
    background: #ffc107;
    color: #000;
    border: none;
    width: 45px;
    height: 45px;
    border-radius: 50%;
    font-size: 1.3rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.3s ease, transform 0.3s ease;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}

.zoom-close:hover {
    background-color: #ffdb6a;
    transform: scale(1.1);
}

@media (max-width: 768px) {
    .product-info-container {
        margin-right: 0;
        margin-top: 20px;
    }
    
    .main-image {
        height: 400px;
    }
    
    .product-title {
        font-size: 1.5rem;
    }
    
    .product-price {
        font-size: 1.6rem;
    }
}

/* Tabs for Description, Reviews etc. */
.nav-tabs {
    border-bottom: 2px solid rgba(255,193,7,0.3);
    margin-bottom: 25px;
}

.nav-tabs .nav-item {
    margin-bottom: -2px;
}

.nav-tabs .nav-link {
    background: transparent;
    border: none;
    border-bottom: 2px solid transparent;
    color: rgba(255,255,255,0.7);
    font-weight: 600;
    padding: 12px 20px;
    transition: all 0.3s ease;
    font-size: 1rem;
}

.nav-tabs .nav-link:hover {
    color: #ffc107;
    border-bottom-color: rgba(255,193,7,0.5);
}

.nav-tabs .nav-link:focus {
    outline: none;
    color: #ffc107;
    box-shadow: inset 0 -2px 0 0 #ffc107;
}

.nav-tabs .nav-link.active {
    color: #ffc107;
    background: rgba(255,193,7,0.1);
    border-color: transparent transparent #ffc107 transparent;
    border-top-left-radius: 8px;
    border-top-right-radius: 8px;
}

.tab-content {
    padding: 25px 0;
    color: rgba(255,255,255,0.85);
    line-height: 1.7;
}

.tab-pane h5 {
    color: #ffc107;
    font-weight: 600;
    margin-bottom: 15px;
}
.tab-pane ul {
    padding-right: 20px;
    list-style-type: "\f058";
}
.tab-pane ul li {
    padding-left: 10px;
    margin-bottom: 8px;
}

/* Notification Styling Refinements */
.alert.position-fixed {
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    border-radius: 10px;
    border-left: 5px solid;
    padding: 15px 20px;
}
.alert.alert-success { border-left-color: #28a745; }
.alert.alert-danger { border-left-color: #dc3545; }
.alert.alert-warning { border-left-color: #ffc107; }
.alert.alert-info { border-left-color: #17a2b8; }

.alert .d-flex {
    align-items: center;
}
.alert .d-flex i {
    font-size: 1.3em;
    margin-right: 10px;
    margin-left: 0;
}

/* Smooth transition for tab panes */
.tab-content > .tab-pane {
    display: block;
    height: 0;
    overflow: hidden;
    opacity: 0;
    transition: opacity 0.4s ease-in-out;
}

.tab-content > .tab-pane.active {
    height: auto;
    opacity: 1;
}
.tab-content > .tab-pane.active.show {
    height: auto;
    opacity: 1;
}

/* Styles for Product Cards (Copied from index.html) */
.product-card {
    background: rgba(255,255,255,0.1);
    backdrop-filter: blur(10px);
    border-radius: 15px;
    overflow: hidden;
    transition: all 0.3s ease;
    margin-bottom: 30px; /* Consistent margin */
    border: 1px solid rgba(255,193,7,0.2);
    position: relative; /* For positioning child elements like wishlist icon */
}

.product-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 15px 35px rgba(0,0,0,0.4); /* Standardized shadow */
    border-color: #ffc107; /* Gold border on hover */
}

.product-card .wishlist-icon {
    position: absolute;
    top: 15px;
    right: 15px; /* Adjusted for RTL if needed, but typically top-right */
    background: rgba(0,0,0,0.7);
    backdrop-filter: blur(10px);
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    z-index: 10;
}

.product-card .wishlist-icon i {
     color: #ffc107; /* Icon color */
}

.product-card .wishlist-icon:hover {
    background: #ffc107;
    transform: scale(1.1);
}

.product-card .wishlist-icon:hover i {
    color: #000; /* Icon color on hover */
}

/* Specific class for product card image to avoid conflict with .main-image */
.product-card .product-card-img {
    height: 250px; /* Or your desired height for related product cards */
    object-fit: cover;
    transition: transform 0.3s ease;
    width: 100%; /* Ensure it spans the card width */
}

.product-card:hover .product-card-img {
    transform: scale(1.05);
}

/* Using .product-info for consistency with index.html structure within card */
.product-card .product-info { 
    padding: 20px;
    text-align: right; /* RTL default */
}

.product-card .product-info h5 { /* Product name/title in card */
    font-size: 1.05rem; /* Adjusted size for product cards */
    font-weight: 600;
    margin-bottom: 10px;
    line-height: 1.4;
    color: #fff; /* Ensure text is white */
    min-height: 44px; /* Approx 2 lines of text */
}

.product-card .product-info .product-description-sm { /* Optional: for a shorter description line */
    color: rgba(255,255,255,0.7);
    font-size: 0.85rem;
    margin-bottom: 12px;
    min-height: 36px; /* Approx 2 lines */
}

.product-card .price-area {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.product-card .price {
    color: #28a745; /* Green price consistent with other pages */
    font-weight: 700;
    font-size: 1.2rem;
}
.product-card .old-price {
    text-decoration: line-through;
    color: rgba(255,255,255,0.5);
    font-size: 0.9rem;
    margin-left: 8px; /* RTL: use margin-right */
}

/* Add to cart button for product card */
.product-card .btn-add-to-cart-card {
    background: #ffc107;
    color: #000;
    border: none;
    border-radius: 20px; /* Rounded */
    width: 100%; /* Full width */
    padding: 10px;
    font-weight: 600;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}
.product-card .btn-add-to-cart-card i {
    margin-left: 8px; /* RTL: use margin-right */
}

.product-card .btn-add-to-cart-card:hover {
    background: #ff8c00; /* Darker gold on hover */
    transform: scale(1.03);
    box-shadow: 0 5px 15px rgba(255,193,7,0.25);
}

/* Sale Badge for product cards */
.product-card .sale-badge {
    position: absolute;
    top: 10px;
    left: 10px; /* RTL: use right: 10px */
    background: #dc3545; /* Red for sale */
    color: white;
    padding: 5px 10px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
    z-index: 5;
}

/* Overlay for Quick View / Add to Cart on hover (Optional - already defined earlier but ensure it targets .product-card if used) */
.product-card .related-card-overlay { /* If using the existing overlay, ensure it is styled within .product-card context or make it global */
   /* Styles from previous step, or integrate them here */
}

/* Themed Content Card (based on profile.html's .profile-content-area) */
.content-card-themed {
    background: rgba(0,0,0,0.75); /* Slightly adjusted opacity for distinct sections */
    border-radius: 15px;
    padding: 30px;
    box-shadow: 0 10px 35px rgba(0,0,0,0.5);
    backdrop-filter: blur(12px); /* Slightly more blur */
    border: 1px solid rgba(255,193,7,0.25); /* Slightly more prominent border */
    margin-bottom: 40px; /* Increased margin between cards */
}

/* Section Title for within Cards (based on profile.html) */
.section-title-card {
    font-size: 1.75rem;
    font-weight: 600;
    color: #ffc107;
    margin-bottom: 30px; /* Increased margin */
    padding-bottom: 15px; /* Increased padding */
    border-bottom: 1px solid rgba(255,193,7,0.2);
    position: relative;
    text-align: right; 
}

.section-title-card::before {
    content: '';
    position: absolute;
    right: 0; 
    bottom: -1px; 
    width: 80px; /* Slightly wider */
    height: 3px;
    background: linear-gradient(to left, #ffc107, #ff8c00); 
    border-radius: 2px;
}
{% endblock css %}

{% block content %}

<div class="container">

    <!-- Product Section -->
    <div class="content-card-themed">
    <div class="row">
        <!-- Product Gallery -->
        <div class="col-lg-6">
            <div class="product-gallery">
                <img id="mainImage" src="{{ product.img.url }}" 
                     alt="{{ product.name }}" class="main-image" onclick="openZoom(this.src)">
                
                <div class="thumbnail-gallery">
                    <img src="{{ product.img.url }}" 
                    alt="{{ product.name }}" class="thumbnail active" onclick="changeMainImage(this)">
                    {% for img in images %}

                    <img src="{{ img.url }}" 
                    alt="{{ img.alt_text }}" class="thumbnail" onclick="changeMainImage(this)">
                    
                    {% endfor %}
                    
                </div>
            </div>
            
            <div class="mt-3 text-center">
                <button class="btn btn-outline-warning" onclick="addToWishlist()">
                    <i class="fas fa-heart me-2"></i>إضافة للمفضلة
                </button>
            </div>
        </div>

        <!-- Product Info -->
        <div class="col-lg-6">
                <div class="product-info-container">
                <h1 class="product-title">قميص ريال مدريد الجديد 2025 - دراجون فيوتشر (أبيض خارجي)</h1>
                <div class="product-price">125.00 EGP</div>
                
                <div class="product-description">
                    <p>قميص النادي الملكي ريال مدريد للموسم الجديد 2025. تصميم حديث مع تقنية الدراي-فيت المتطورة لضمان الراحة القصوى. يحتوي على تصميم التنين المميز الذي يرمز لقوة وعراقة النادي الملكي.</p>
                    
                    <ul class="list-unstyled mt-3">
                        <li>• خامة بوليستر عالية الجودة 100%</li>
                        <li>• تقنية الدراي-فيت لامتصاص العرق</li>
                        <li>• تصميم التنين الحصري</li>
                        <li>• شعار النادي الأصلي مطرز</li>
                        <li>• مناسب للارتداء اليومي والرياضي</li>
                    </ul>
                </div>

                <!-- Size Selection -->
                <div class="size-selector">
                    <h6 class="mb-3">اختر المقاس:</h6>
                    <div class="size-options">
                        <span class="size-option" data-size="S">S</span>
                        <span class="size-option active" data-size="M">M</span>
                        <span class="size-option" data-size="L">L</span>
                        <span class="size-option" data-size="XL">XL</span>
                        <span class="size-option" data-size="XXL">XXL</span>
                    </div>
                </div>

                <!-- Quantity Selection -->
                <div class="quantity-selector">
                        <label for="quantityProduct" class="me-3">الكمية:</label>
                        <div class="quantity-controls-product">
                            <button class="quantity-btn-product" onclick="decreaseQuantity('quantityProduct')">-</button>
                            <input type="number" id="quantityProduct" class="quantity-input-product" value="1" min="1" max="10" aria-label="Product quantity">
                            <button class="quantity-btn-product" onclick="increaseQuantity('quantityProduct')">+</button>
                        </div>
                </div>

                <!-- Add to Cart Buttons -->
                <button class="btn-add-cart" onclick="addToCart()">
                    <i class="fas fa-shopping-cart me-2"></i>إضافة للسلة
                </button>
                
                    <button class="btn-wishlist" onclick="toggleWishlist(this)">
                        <i class="far fa-heart me-2"></i>إضافة للمفضلة
                </button>

                <!-- Product Features -->
                <div class="product-features">
                    <div class="feature-item">
                        <i class="fas fa-shipping-fast feature-icon"></i>
                        <span>شحن مجاني للطلبات فوق 200 جنيه</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-undo feature-icon"></i>
                        <span>إمكانية الإرجاع خلال 14 يوم</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-certificate feature-icon"></i>
                        <span>منتج أصلي 100% مع ضمان الجودة</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-phone feature-icon"></i>
                        <span>خدمة عملاء 24/7</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Description, Reviews, etc. Tabs -->
    <div class="product-details-tabs content-card-themed">
        <ul class="nav nav-tabs" id="productTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">المعلومات</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false">تفاصيل</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab" aria-controls="contact" aria-selected="false">مواصفات</button>
            </li>
        </ul>
        <div class="tab-content" id="productTabsContent">
            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                <!-- Home tab content -->
            </div>
            <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                <!-- Profile tab content -->
            </div>
            <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                <!-- Contact tab content -->
            </div>
        </div>
    </div>

    <!-- Related Products -->
    <div class="related-products content-card-themed">
        <h2 class="section-title-card">المنتجات المقترحة</h2>
        
        <div class="row">
            <div class="col-lg-3 col-md-6">
                <div class="product-card">
                    <div class="wishlist-icon" onclick="toggleWishlistCard(this)">
                        <i class="far fa-heart"></i>
                    </div>
                    <span class="sale-badge">خصم</span>
                    <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 220'><rect fill='%23000000' width='300' height='220'/><circle fill='%23ffc107' cx='50' cy='50' r='20'/><text x='150' y='120' text-anchor='middle' fill='%23ffffff' font-size='16'>ريال مدريد</text><text x='150' y='140' text-anchor='middle' fill='%23ffffff' font-size='12'>أسود</text></svg>" class="product-card-img" alt="قميص أسود">
                    <div class="product-info">
                        <h5>قميص ريال مدريد تدريب 2024/25 - أسود - للاعبين الاحتياطيين</h5>
                        <div class="price-area">
                            <span class="price">600 EGP</span>
                            <span class="old-price">800 EGP</span>
                        </div>
                        <button class="btn-add-to-cart-card">
                            <i class="fas fa-cart-plus"></i> &nbsp;أضف للسلة
                        </button>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6">
                <div class="product-card">
                    <div class="wishlist-icon" onclick="toggleWishlistCard(this)">
                        <i class="far fa-heart"></i>
                    </div>
                    <span class="sale-badge">خصم</span>
                    <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 220'><rect fill='%23e3f2fd' width='300' height='220'/><circle fill='%231976d2' cx='50' cy='50' r='20'/><text x='150' y='120' text-anchor='middle' fill='%23000' font-size='16'>ريال مدريد</text><text x='150' y='140' text-anchor='middle' fill='%23000' font-size='12'>أزرق فاتح</text></svg>" class="product-card-img" alt="قميص أزرق">
                    <div class="product-info">
                        <h5>قميص ريال مدريد تدريب 2024/25 بدون أكمام - للاعبين الاحتياطيين</h5>
                        <div class="price-area">
                            <span class="price">450 EGP</span>
                            <span class="old-price">600 EGP</span>
                        </div>
                        <button class="btn-add-to-cart-card">
                            <i class="fas fa-cart-plus"></i> &nbsp;أضف للسلة
                        </button>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6">
                <div class="product-card">
                    <div class="wishlist-icon" onclick="toggleWishlistCard(this)">
                        <i class="far fa-heart"></i>
                    </div>
                    <span class="sale-badge">خصم</span>
                    <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 220'><rect fill='%23ffffff' width='300' height='220'/><text x='150' y='120' text-anchor='middle' fill='%23000' font-size='16'>شورت ريال</text><text x='150' y='140' text-anchor='middle' fill='%23000' font-size='12'>أبيض</text></svg>" class="product-card-img" alt="شورت أبيض">
                    <div class="product-info">
                        <h5>شورت ريال مدريد جديد 2025 رونالدو</h5>
                        <div class="price-area">
                            <span class="price">450 EGP</span>
                            <span class="old-price">550 EGP</span>
                        </div>
                        <button class="btn-add-to-cart-card">
                            <i class="fas fa-cart-plus"></i> &nbsp;أضف للسلة
                        </button>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6">
                <div class="product-card">
                    <div class="wishlist-icon" onclick="toggleWishlistCard(this)">
                        <i class="far fa-heart"></i>
                    </div>
                    <span class="sale-badge">خصم</span>
                    <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 220'><rect fill='%23ffffff' width='300' height='220'/><defs><pattern id='dragon2' patternUnits='userSpaceOnUse' width='50' height='50'><path d='M10,10 Q25,5 40,10 Q25,15 10,10' fill='%23001f3f' opacity='0.2'/></pattern></defs><rect fill='url(%23dragon2)' width='300' height='220'/><text x='150' y='120' text-anchor='middle' fill='%23000' font-size='14'>دراجون فيوتشر</text><text x='150' y='140' text-anchor='middle' fill='%23000' font-size='12'>أبيض</text></svg>" class="product-card-img" alt="قميص دراجون">
                    <div class="product-info">
                        <h5>قميص ريال مدريد جديد الدراجون 2025 - دراجون فيوتشر (أبيض خارجي)</h5>
                        <div class="price-area">
                            <span class="price">300 EGP</span>
                            <span class="old-price">400 EGP</span>
                        </div>
                        <button class="btn-add-to-cart-card">
                            <i class="fas fa-cart-plus"></i> &nbsp;أضف للسلة
                        </button>
                    </div>
                </div>
            </div>

            <!-- Second Row -->
            <div class="col-lg-3 col-md-6">
                <div class="product-card">
                    <div class="wishlist-icon" onclick="toggleWishlistCard(this)">
                        <i class="far fa-heart"></i>
                    </div>
                    <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 220'><rect fill='%234fc3f7' width='300' height='220'/><text x='150' y='120' text-anchor='middle' fill='%23000' font-size='16'>تيكا</text><text x='150' y='140' text-anchor='middle' fill='%23000' font-size='12'>1996/97</text></svg>" class="product-card-img" alt="قميص تيكا">
                    <div class="product-info">
                        <h5>قميص ريال مدريد ريترو 1996/97 تيكا تشامبيونز</h5>
                        <div class="price-area">
                            <span class="price">300 EGP</span>
                        </div>
                        <button class="btn-add-to-cart-card">
                            <i class="fas fa-cart-plus"></i> &nbsp;أضف للسلة
                        </button>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6">
                <div class="product-card">
                    <div class="wishlist-icon" onclick="toggleWishlistCard(this)">
                        <i class="far fa-heart"></i>
                    </div>
                    <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 220'><rect fill='%23ffffff' width='300' height='220'/><text x='150' y='100' text-anchor='middle' fill='%23000' font-size='14'>Emirates</text><text x='150' y='120' text-anchor='middle' fill='%23000' font-size='12'>2017/18</text><text x='150' y='140' text-anchor='middle' fill='%23000' font-size='12'>الأبطال</text></svg>" class="product-card-img" alt="قميص الأبطال">
                    <div class="product-info">
                        <h5>قميص ريال مدريد 2017/18 الأبطال نسخة اللاعبين</h5>
                        <div class="price-area">
                            <span class="price">350 EGP</span>
                        </div>
                        <button class="btn-add-to-cart-card">
                            <i class="fas fa-cart-plus"></i> &nbsp;أضف للسلة
                        </button>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6">
                <div class="product-card">
                    <div class="wishlist-icon" onclick="toggleWishlistCard(this)">
                        <i class="far fa-heart"></i>
                    </div>
                    <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 220'><rect fill='%23ffffff' width='300' height='220'/><circle fill='%23ffc107' cx='50' cy='50' r='20'/><text x='150' y='120' text-anchor='middle' fill='%23000' font-size='16'>طقم كامل</text><text x='150' y='140' text-anchor='middle' fill='%23000' font-size='12'>2024/25</text></svg>" class="product-card-img" alt="طقم كامل">
                    <div class="product-info">
                        <h5>طقم ريال مدريد الكامل 2024/25 - قميص + شورت + جوارب</h5>
                        <div class="price-area">
                            <span class="price">450 EGP</span>
                        </div>
                        <button class="btn-add-to-cart-card">
                            <i class="fas fa-cart-plus"></i> &nbsp;أضف للسلة
                        </button>
                    </div>
                </div>
            </div>

            <div class="col-lg-3 col-md-6">
                <div class="product-card">
                    <div class="wishlist-icon" onclick="toggleWishlistCard(this)">
                        <i class="far fa-heart"></i>
                    </div>
                    <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 300 220'><rect fill='%23f5f5f5' width='300' height='220'/><text x='150' y='120' text-anchor='middle' fill='%23000' font-size='16'>جاكيت تدريب</text><text x='150' y='140' text-anchor='middle' fill='%23000' font-size='12'>2024/25</text></svg>" class="product-card-img" alt="جاكيت">
                    <div class="product-info">
                        <h5>جاكيت تدريب ريال مدريد 2024/25 - نسخة اللاعبين</h5>
                        <div class="price-area">
                            <span class="price">550 EGP</span>
                        </div>
                        <button class="btn-add-to-cart-card">
                            <i class="fas fa-cart-plus"></i> &nbsp;أضف للسلة
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-6 mb-4 mb-lg-0">
                <h5 class="navbar-brand-footer-text">MBA</h5>
                <p>متجرك الأول لأحدث وأجود الملابس الرياضية. نقدم منتجات أصلية من أفضل الماركات العالمية.</p>
                <div class="social-icons">
                    <a href="#" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" title="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" title="Snapchat"><i class="fab fa-snapchat-ghost"></i></a>
                </div>
            </div>
            
            <div class="col-lg-2 col-md-6 mb-4 mb-lg-0">
                <h5>روابط مهمة</h5>
                <ul class="list-unstyled">
                    <li><a href="#">عن MBA</a></li>
                    <li><a href="#">الوظائف</a></li>
                    <li><a href="#">سياسة الخصوصية</a></li>
                    <li><a href="#">الشروط والأحكام</a></li>
                    <li><a href="#">تواصل معنا</a></li>
                </ul>
            </div>
            
            <div class="col-lg-2 col-md-6 mb-4 mb-lg-0">
                <h5>حسابي</h5>
                <ul class="list-unstyled">
                    <li><a href="profile.html">ملفي الشخصي</a></li>
                    <li><a href="cart.html">سلة التسوق</a></li>
                    <li><a href="#">طلباتي</a></li>
                    <li><a href="#">قائمة الأمنيات</a></li>
                    <li><a href="#">تسجيل الخروج</a></li>
                </ul>
            </div>
            
            <div class="col-lg-2 col-md-6 mb-4 mb-lg-0">
                <h5>أقسام المتجر</h5>
                <ul class="list-unstyled">
                    <li><a href="#">ملابس رياضية</a></li>
                    <li><a href="#">أحذية</a></li>
                    <li><a href="#">إكسسوارات</a></li>
                    <li><a href="#">معدات رياضية</a></li>
                    <li><a href="#">عروض وتخفيضات</a></li>
                </ul>
            </div>
            
            <div class="col-lg-3 col-md-12">
                <h5>اشترك في النشرة البريدية</h5>
                <form class="mb-3">
                    <div class="input-group">
                        <input type="email" class="form-control" placeholder="ادخل بريدك الإلكتروني" style="border-top-left-radius: 0; border-bottom-left-radius: 0; border-top-right-radius: 20px; border-bottom-right-radius: 20px;">
                        <button class="btn btn-gold" type="submit" style="border-top-left-radius: 20px; border-bottom-left-radius: 20px; border-top-right-radius: 0; border-bottom-right-radius: 0; margin-right: -1px;">اشترك</button>
                    </div>
                </form>
                <p>تابعنا ليصلك كل جديد وعروض حصرية.</p>
                <div class="app-download">
                    <a href="#"><img src="https://via.placeholder.com/120x40.png?text=App+Store" alt="App Store"></a>
                    <a href="#"><img src="https://via.placeholder.com/120x40.png?text=Google+Play" alt="Google Play"></a>
                </div>
            </div>
        </div>
        
        <hr class="my-4 border-secondary">
        
        <div class="row">
            <div class="col-md-6">
                <p class="mb-0 small text-muted">&copy; 2024 MBA. جميع الحقوق محفوظة.</p>
            </div>
            <div class="col-md-6 text-md-end">
                <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 30'><rect fill='%23ffffff' width='40' height='30' x='0' rx='5'/><rect fill='%23ffffff' width='40' height='30' x='50' rx='5'/><rect fill='%23ffffff' width='40' height='30' x='100' rx='5'/><rect fill='%23ffffff' width='40' height='30' x='150' rx='5'/></svg>" alt="Payment Methods" height="30">
            </div>
        </div>
    </div>
</footer>

<!-- Zoom Overlay -->
<div class="zoom-overlay" id="zoomOverlay" onclick="closeZoom()">
    <img src="" alt="Zoomed Image" class="zoom-image" id="zoomImage">
    <button class="zoom-close" onclick="closeZoom()">
        <i class="fas fa-times"></i>
    </button>
</div>

{% endblock content %}


{% block scripts %}

<!-- JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script>
    // Image Gallery Functions
    function changeMainImage(thumbnailElement) {
        const mainImage = document.getElementById('mainImage');
        const newSrc = thumbnailElement.src.replace('80', '400').replace('80', '500');

        mainImage.classList.add('main-image-fade');

        setTimeout(() => {
            mainImage.src = newSrc;
            mainImage.onload = () => {
                mainImage.classList.remove('main-image-fade');
            }
            setTimeout(() => mainImage.classList.remove('main-image-fade'), 50);
        }, 200);
        
        document.querySelectorAll('.thumbnail').forEach(thumb => {
            thumb.classList.remove('active');
        });
        thumbnailElement.classList.add('active');
    }

    // Size Selection
    document.querySelectorAll('.size-option').forEach(size => {
        size.addEventListener('click', function() {
            document.querySelectorAll('.size-option').forEach(s => s.classList.remove('active'));
            this.classList.add('active');
        });
    });

    // Quantity Functions
    function increaseQuantity(inputId) {
        const quantityInput = document.getElementById(inputId);
        const currentValue = parseInt(quantityInput.value);
        if (currentValue < parseInt(quantityInput.max || 10)) {
            quantityInput.value = currentValue + 1;
        }
    }

    function decreaseQuantity(inputId) {
        const quantityInput = document.getElementById(inputId);
        const currentValue = parseInt(quantityInput.value);
        if (currentValue > parseInt(quantityInput.min || 1)) {
            quantityInput.value = currentValue - 1;
        }
    }

    // Cart Functions
    function addToCart() {
        const selectedSizeElement = document.querySelector('.size-option.active');
        if (!selectedSizeElement) {
            showNotification('الرجاء اختيار المقاس أولاً!', 'warning');
            return;
        }
        
        const selectedSize = selectedSizeElement.dataset.size;
        const quantity = document.getElementById('quantityProduct').value;
        
        showNotification('تمت إضافة المنتج للسلة بنجاح!', 'success');
        
        const cartBadge = document.querySelector('.badge');
        if (cartBadge) {
            const currentCount = parseInt(cartBadge.textContent);
            cartBadge.textContent = currentCount + parseInt(quantity);
        }
        
        console.log('Added to cart:', {
            product: 'قميص ريال مدريد 2025',
            size: selectedSize,
            quantity: quantity,
            price: 125
        });
    }

    // Wishlist function for main product page
    function toggleWishlist(buttonElement) {
        const icon = buttonElement.querySelector('i');
        const isInWishlist = buttonElement.classList.toggle('active');

        if (isInWishlist) {
            icon.classList.remove('far');
            icon.classList.add('fas');
            buttonElement.innerHTML = '<i class="fas fa-heart me-2"></i> في المفضلة';
            showNotification('تمت إضافة المنتج للمفضلة!', 'success');
        } else {
            icon.classList.remove('fas');
            icon.classList.add('far');
            buttonElement.innerHTML = '<i class="far fa-heart me-2"></i> إضافة للمفضلة';
            showNotification('تمت إزالة المنتج من المفضلة.', 'info');
        }
    }

    // Wishlist function for product cards
    function toggleWishlistCard(iconElement) {
        const icon = iconElement.querySelector('i');
        const isActive = iconElement.classList.toggle('active'); // Toggling active class on the div.wishlist-icon

        if (isActive) {
            icon.classList.remove('far'); 
            icon.classList.add('fas'); 
            // showNotification('أضيف للمفضلة!', 'success'); // Optional notification
        } else {
            icon.classList.remove('fas');
            icon.classList.add('far');
            // showNotification('أزيل من المفضلة.', 'info'); // Optional notification
        }
        // Add further logic here if needed (e.g., API calls, localStorage)
    }

    // Notification Function
    function showNotification(message, type) {
        const notification = document.createElement('div');
        notification.className = `alert alert-${type} shadow-lg rounded-lg`;
        notification.style.position = 'fixed';
        notification.style.top = '20px';
        notification.style.right = '20px';
        notification.style.zIndex = '10000';
        notification.style.minWidth = '300px';
        notification.style.maxWidth = '400px';
        notification.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
        notification.style.opacity = '0';
        notification.style.transform = 'translateY(-20px)';
        
        const iconClass = type === 'success' ? 'fa-check-circle' :
                          type === 'danger' ? 'fa-exclamation-circle' :
                          type === 'warning' ? 'fa-exclamation-triangle' :
                          'fa-info-circle';

        notification.innerHTML = `
            <div class="d-flex align-items-center">
                <i class="fas ${iconClass} me-2"></i>
                <span>${message}</span>
            </div>
        `;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.style.opacity = '1';
            notification.style.transform = 'translateY(0)';
        }, 10);
        
        setTimeout(() => {
            notification.style.opacity = '0';
            notification.style.transform = 'translateY(-20px)';
            setTimeout(() => notification.remove(), 350);
        }, 3500);
    }

    // Zoom Functions
    function openZoom(src) {
        const zoomOverlay = document.getElementById('zoomOverlay');
        const zoomImage = document.getElementById('zoomImage');
        if (zoomOverlay && zoomImage) {
            zoomImage.src = src;
            zoomOverlay.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }
    }

    function closeZoom() {
        const zoomOverlay = document.getElementById('zoomOverlay');
        if (zoomOverlay) {
            zoomOverlay.style.display = 'none';
            document.body.style.overflow = 'auto';
        }
    }

    // Initialize tooltips
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    const tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    });

    // Smooth scroll for specific anchor links only
    document.querySelectorAll('a[href="#top"], a[href="#products"], a[href="#about"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            const targetId = this.getAttribute('href');
            if (targetId && targetId !== '#') {
                const target = document.querySelector(targetId);
                if (target) {
                    e.preventDefault();
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            }
        });
    });

    // Add loading animation to buttons
    document.querySelectorAll('.btn-add-cart, .btn-wishlist').forEach(btn => {
        btn.addEventListener('click', function() {
            const originalText = this.innerHTML;
            this.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>جاري المعالجة...';
            this.disabled = true;
            
            setTimeout(() => {
                this.innerHTML = originalText;
                this.disabled = false;
            }, 1000);
        });
    });

    // Fixed lazy loading for images
    if ('IntersectionObserver' in window) {
        const imageObserver = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const img = entry.target;
                    if (!img.complete) {
                        img.style.opacity = '0';
                        img.style.transition = 'opacity 0.5s';
                        
                        img.addEventListener('load', function() {
                            img.style.opacity = '1';
                        });
                        
                        img.addEventListener('error', function() {
                            img.style.opacity = '1';
                        });
                    }
                    observer.unobserve(img);
                }
            });
        });

        document.querySelectorAll('img:not([data-no-lazy])').forEach(img => {
            if (!img.complete) {
                imageObserver.observe(img);
            }
        });
    }

    // Initialize Tabs for smooth transition (if using Bootstrap 5)
    document.addEventListener('DOMContentLoaded', function () {
        var tabTriggers = document.querySelectorAll('#productTabs button[data-bs-toggle="tab"]');
        tabTriggers.forEach(function (tabTrigger) {
            tabTrigger.addEventListener('shown.bs.tab', function (event) {
            });
        });

        // Initialize wishlist button icon
        document.querySelectorAll('.btn-wishlist').forEach(buttonElement => {
            const icon = buttonElement.querySelector('i');
            if (buttonElement.classList.contains('active')) {
                icon.classList.remove('far');
                icon.classList.add('fas');
                buttonElement.innerHTML = '<i class="fas fa-heart me-2"></i> في المفضلة';
            } else {
                icon.classList.remove('fas');
                icon.classList.add('far');
                buttonElement.innerHTML = '<i class="far fa-heart me-2"></i> إضافة للمفضلة';
            }
        });
    });
</script>
{% endblock scripts %}